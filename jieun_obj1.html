<!DOCTYPE html>

<html>
	<head>
		<meta charset = "utf-8">
		<title>환영합니다.</title>
		<style>
			rect {
				transition : 1s;
			}
		</style>
	</head>
	<body>
		<button id = "btn1">
			CLICK HERE
		</button>
		<script src = https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.js>  </script> <!-- d3 cdn -->
		<script>
			var dataset = [1,2,3,4,5,6,7,8,9,10];
			var dataset2 = [];
			var maxHeight = 100;

			for(var i= 0 ; i < 10 ; i++) {
				var Height = Math.floor(Math.random() * 10) + 1;
				dataset2.push(Height);
			}

			d3.select('body').append('svg').selectAll('.rect').data(dataset).enter().append('rect')
			.attr('y',function(d){
				return maxHeight-(d*10);
			})
			.attr('width',15)
			.attr('height',function(d){
				return d*10;
			})
			.attr('x',function(d,i){
					return i*20;
			})
			.style('fill',function(d){
				if (d > 6)
					return 'skyblue';
				else 
					return 'red';
			});
			document.getElementById('btn1').addEventListener('click',function(evt){
				d3.selectAll('rect').data(dataset2)
				.attr('height',function(d){
					return d*10;
				})
				.attr('y',function(d){
					return maxHeight-(d*10);
				})
				.style('fill',function(d){
					var rgb = [];
					for(var i = 0 ; i < 3 ; i++) {
						var color = Math.floor(Math.random() * 225) + 1;
						rgb.push(color);
					} 
					return 'rgba('+rgb[0]+','+rgb[1]+','+rgb[2]+',0.3)';
				});
			});
		</script>
	</body>
</html>